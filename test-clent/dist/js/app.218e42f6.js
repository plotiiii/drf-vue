(function(t){function e(e){for(var n,i,s=e[0],l=e[1],c=e[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"09ca":function(t,e,a){},"10ae":function(t,e,a){},"127b":function(t,e,a){"use strict";var n=a("d190"),o=a.n(n);o.a},"12a6":function(t,e,a){"use strict";var n=a("35aa"),o=a.n(n);o.a},"1c7b":function(t,e,a){"use strict";var n=a("8cb3"),o=a.n(n);o.a},"28fb":function(t,e,a){"use strict";var n=a("09ca"),o=a.n(n);o.a},"2dc5":function(t,e,a){"use strict";var n=a("10ae"),o=a.n(n);o.a},"2dca":function(t,e,a){},"2e17":function(t,e,a){"use strict";var n=a("5acb"),o=a.n(n);o.a},"35aa":function(t,e,a){},"367a":function(t,e,a){"use strict";var n=a("2dca"),o=a.n(n);o.a},3846:function(t,e,a){"use strict";var n=a("5d3f"),o=a.n(n);o.a},"507b":function(t,e,a){"use strict";var n=a("927a"),o=a.n(n);o.a},5338:function(t,e,a){"use strict";var n=a("7cc1"),o=a.n(n);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("4de4"),a("4160"),a("b64b"),a("159b"),a("3880");var n,o=a("b9bc"),r=a.n(o),i=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2b0e")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},l=[],c={name:"app",components:{}},u=c,p=(a("5c0b"),a("2877")),d=Object(p["a"])(u,s,l,!1,null,null,null),m=d.exports,f=(a("d3b7"),a("d4ec")),h=a("bee2"),b=a("82ae"),v=a.n(b),g="USER_KEY",_="JWT_TOKEN_KEY",y=function(){function t(){Object(f["a"])(this,t),this.token=null,this.user=null,this.token=localStorage.getItem(_);var e=localStorage.getItem(g);e&&"undefined"!=e&&(this.user=JSON.parse(e))}return Object(h["a"])(t,[{key:"setUserToken",value:function(t,e){this.user=t,this.token=e,localStorage.setItem(g,JSON.stringify(t)),localStorage.setItem(_,e)}},{key:"setUser",value:function(t){this.user=t,localStorage.setItem(g,JSON.stringify(t))}},{key:"clearUserToken",value:function(){this.user=null,this.token=null,localStorage.removeItem(g),localStorage.removeItem(_)}},{key:"is_authed",get:function(){return!(!this.user||!this.token)}}],[{key:"getInstance",value:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(),k=y.getInstance(),j="http://127.0.0.1:8000",x=function(){function t(){Object(f["a"])(this,t),this.http=v.a.create({baseURL:j}),this.http.interceptors.request.use((function(t){var e=k.token;return e&&"undefined"!=e&&(t.headers.common.Authorization="JWT "+e),t})),this.http.interceptors.response.use(null,(function(t){return t&&t.response&&403==t.response.status&&k.clearUserToken(),Promise.reject(t)}))}return Object(h["a"])(t,[{key:"login",value:function(t){var e="/auth/login";return this.http.post(e,t)}},{key:"addProject",value:function(t){var e="/project";return this.http.post(e,t)}},{key:"getProjectList",value:function(){var t="/project";return this.http.get(t)}},{key:"editProject",value:function(t,e){var a="/project/"+t;return this.http.put(a,e)}},{key:"getProjectDetail",value:function(t){var e="/project/"+t;return this.http.get(e)}},{key:"addHost",value:function(t){var e="/host";return this.http.post(e,t)}},{key:"deleteHost",value:function(t){var e="/host/"+t;return this.http.delete(e)}},{key:"addApi",value:function(t){var e="/api";return this.http.post(e,t)}},{key:"deleteApi",value:function(t){var e="/api/"+t;return this.http.delete(e)}},{key:"editApi",value:function(t,e){var a="/api/"+t;return this.http.put(a,e)}},{key:"runApi",value:function(t){var e="/run/api/"+t;return this.http.post(e)}},{key:"addCase",value:function(t){var e="/case";return this.http.post(e,t)}},{key:"editCase",value:function(t,e){var a="/case/"+t;return this.http.put(a,e)}},{key:"runCase",value:function(t){var e="/run/case/"+t;return this.http.post(e)}},{key:"getRunRecords",value:function(t,e){var a="/record?project="+t+"&type="+e;return this.http.get(a)}},{key:"editUser",value:function(t){var e="/auth/user";return this.http.put(e,t)}},{key:"getUserList",value:function(){var t="/auth/user";return this.http.get(t)}},{key:"getIndexData",value:function(){var t="/index";return this.http.get(t)}},{key:"addTask",value:function(t){var e="/task";return this.http.post(e,t)}},{key:"editTask",value:function(t,e){var a="/task/"+t;return this.http.put(a,e)}},{key:"changeTaskStatus",value:function(t,e){var a="/task/"+t+"/"+e;return this.http.post(a)}}]),t}(),$=new x,w=(a("b0c0"),a("3f11")),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-container",{staticClass:"frame-container"},[a("el-header",{staticClass:"header"},[a("a",{staticClass:"brand",attrs:{href:"/"}},[t._v("接口测试平台")]),a("div",{staticClass:"header-content"},[a("ul",{staticClass:"menu-list"},[a("li",{class:0==t.activeIndex?"active":""},[a("router-link",{attrs:{to:"/"}},[t._v("首页")])],1),a("li",{class:1==t.activeIndex?"active":""},[a("router-link",{attrs:{to:"/project"}},[t._v("项目管理")])],1),a("li",{class:2==t.activeIndex?"active":""},[a("router-link",{attrs:{to:"/members"}},[t._v("成员管理")])],1)]),a("div",{staticClass:"signout"},[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[a("img",{staticClass:"avatar-img",attrs:{src:t.$auth.user.avatar||"http://127.0.0.1:8000/static/image/default.jpg"}}),t._v(" "+t._s(t.$auth.user.username)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("router-link",{attrs:{to:"/settings"}},[t._v("设置")])],1),a("el-dropdown-item",{nativeOn:{click:function(e){return t.onLogout(e)}}},[t._v("退出登录")])],1)],1)],1)])]),a("el-container",[a("el-main",{staticClass:"main"},[a("router-view")],1),a("el-footer",{staticClass:"footer"},[t._v("这是Footer")])],1)],1)],1)},A=[],S=(a("c975"),a("ac1f"),a("5319"),{name:"Frame",data:function(){return{activeIndex:-1}},components:{},methods:{onLogout:function(){this.$auth.clearUserToken(),this.$router.replace("/login")}},watch:{$route:function(t,e){"index"==t.name?this.activeIndex=0:t.path.indexOf("project")>0?this.activeIndex=1:t.path.indexOf("members")>0?this.activeIndex=2:this.activeIndex=-1}}}),O=S,F=(a("f30a"),a("2dc5"),Object(p["a"])(O,C,A,!1,null,"57c938d4",null)),E=F.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"login-container"},[a("el-row",[a("el-col",{attrs:{span:7,offset:8}},[a("h1",{staticClass:"page-title"},[t._v("存哥测试平台")]),a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,"label-width":"80px",rules:t.rules}},[a("el-form-item",{attrs:{label:"手机",prop:"username"}},[a("el-input",{model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),a("el-form-item",{staticClass:"page-title denglu"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("登录")])],1)],1)],1)],1)],1)])},I=[],T={data:function(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入手机号码！",trigger:"blur"},{trigger:"blur"}],password:[{required:!0,message:"请输入密码！",trigger:"blur"},{min:4,max:20,message:"密码字符应该在4-20之间！",trigger:"blur"}]}}},methods:{onSubmit:function(){var t=this;this.$refs["loginForm"].validate((function(e){e&&t.$http.login(t.loginForm).then((function(e){var a=e.data,n=a.token,o=a.user;t.$auth.setUserToken(o,n),t.$router.push("/")}))}))}}},D=T,L=(a("5338"),Object(p["a"])(D,P,I,!1,null,null,null)),R=L.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("h1",{staticClass:"page-title"},[t._v("接口API测试平台")]),a("div",{staticClass:"card-list-group"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("项目总数")]),a("div",{staticClass:"card-body"},[t._v(t._s(t.count.project))])])],1),a("el-col",{attrs:{span:4}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("API总数")]),a("div",{staticClass:"card-body"},[t._v(t._s(t.count.api))])])],1),a("el-col",{attrs:{span:4}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("用例总数")]),a("div",{staticClass:"card-body"},[t._v(t._s(t.count.case))])])],1),a("el-col",{attrs:{span:4}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("节省人力")]),a("div",{staticClass:"card-body"},[t._v(t._s(t.count.api_record+t.count.case_record))])])],1)],1)],1)])},V=[],z={name:"Index",data:function(){return{count:{project:0,api:0,case:0,api_record:0,case_record:0}}},components:{},mounted:function(){var t=this;this.$http.getIndexData().then((function(e){var a=e.data.count;t.count=a,t.count.run=a.api_record+a.case_record}))}},H=z,J=(a("74da"),Object(p["a"])(H,N,V,!1,null,"3494289a",null)),U=J.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("h1",{staticStyle:{padding:"10px 0"}},[t._v("设置")]),a("div",{staticClass:"form-group"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.rules,"label-position":"left"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"telephone"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.form.telephone,callback:function(e){t.$set(t.form,"telephone",e)},expression:"form.telephone"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-upload",attrs:{action:t.upload_action,header:t.headers,"show-file-list":!1,"on-success":t.onUploadSuccess,"before-upload":t.onBeforeUpload}},[t.form.avatar?a("img",{staticClass:"avatar",attrs:{src:t.form.avatar}}):a("i",{staticClass:"el-icon-plus avatar-upload-icon"})])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")]),a("el-button",{attrs:{type:"default"},on:{click:t.onCancel}},[t._v("取消")])],1)],1)],1)])},B=[],M={name:"Settings",data:function(){return{form:{username:"",email:"",telephone:"",avatar:""},rules:{username:[{required:!0,trigger:"blur",message:"请输入用户名！"}],email:[{required:!0,trigger:"blur",message:"请输入邮箱！"}],telephone:[{required:!0,trigger:"blur",message:"请输入手机号码！"}]},upload_action:"http://127.0.0.1:8000/auth/avatar",headers:{Authorization:"JWT "+this.$auth.token}}},components:{},mounted:function(){var t={username:this.$auth.user.username,telephone:this.$auth.user.telephone,email:this.$auth.user.email,avatar:this.$auth.user.avatar};this.form=t},methods:{onUploadSuccess:function(t,e){this.form.avatar=t.picture},onBeforeUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||alert("上传头像图片只能是 JPG 格式!"),a||alert("上传头像图片大小不能超过 2MB!"),e&&a},onSubmit:function(){var t=this;this.$refs["form"].validate((function(e){e&&(t.$loading.show(),t.$http.editUser(t.form).then((function(e){var a=e.data;t.$auth.setUser(a),t.$loading.hide(),t.$message.success()})))}))},onCancel:function(){}}},G=M,K=(a("c889"),a("1c7b"),Object(p["a"])(G,q,B,!1,null,"53ed2a06",null)),W=K.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("h1",[t._v("项目列表")]),a("div",{staticClass:"top-group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.onAddProjectButtonClick}},[t._v("新增项目")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.projects}},[a("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/project/"+e.row.id}},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"100"}}),a("el-table-column",{attrs:{label:"最后修改时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormat")(e.row.last_update_time))+" ")]}}])}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{label:"状态",width:"100"}},[[a("el-tag",{attrs:{type:"success"}},[t._v("可用")])]],2),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.onEditProject(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"新增项目",visible:t.addDialogVisiable},on:{"update:visible":function(e){t.addDialogVisiable=e}}},[a("el-form",{ref:"projectForm",attrs:{model:t.projectForm,"label-width":"80px",rules:t.projectRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.projectForm.name,callback:function(e){t.$set(t.projectForm,"name",e)},expression:"projectForm.name"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:t.projectForm.type,callback:function(e){t.$set(t.projectForm,"type",e)},expression:"projectForm.type"}},[a("el-option",{attrs:{label:"Web",value:"web"}}),a("el-option",{attrs:{label:"App",value:"app"}})],1)],1),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.projectForm.description,callback:function(e){t.$set(t.projectForm,"description",e)},expression:"projectForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisiable=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.addProjectButtonLoading},on:{click:t.onSubmitAddProject}},[t._v("确 定")])],1)],1)],1)},Q=[],X=(a("a4d3"),a("e01a"),a("b85c")),Z={name:"ProjectList",data:function(){return{projects:[],addDialogVisiable:!1,addProjectButtonLoading:!1,dialogType:"add",projectForm:{name:"",type:"",description:""},projectRules:{name:[{required:!0,message:"请输入手机号码！",trigger:"blur"}],type:[{required:!0,message:"请选择项目类型！",trigger:"blur"}]}}},components:{},mounted:function(){var t=this;this.$http.getProjectList().then((function(e){var a=e.data;t.projects=a}))},methods:{initProjectForm:function(){this.projectForm={name:"",type:"",description:""}},onAddProjectButtonClick:function(){this.dialogType="add",this.addDialogVisiable=!0},onEditProject:function(t){this.projectForm={name:t.name,type:t.type,description:t.description,id:t.id},this.addDialogVisiable=!0,this.dialogType="edit"},onSubmitAddProject:function(){var t=this;this.$refs["projectForm"].validate((function(e){e&&(t.addProjectButtonLoading=!0,"add"==t.dialogType?t.$http.addProject(t.projectForm).then((function(e){if(t.addProjectButtonLoading=!1,e&&201==e.status){var a=e.data;t.projects.push(a),t.addDialogVisiable=!1,t.initProjectForm(),t.$message.success("恭喜！项目创建成功！")}})):t.$http.editProject(t.projectForm.id,t.projectForm).then((function(e){if(t.addProjectButtonLoading=!1,e){t.addDialogVisiable=!1,t.initProjectForm(),t.$message.success("恭喜！项目修改成功！");var a,n=e.data,o=0,r=Object(X["a"])(t.projects);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(console.log(s),console.log("xxxxx"),s.id==n.id){i["default"].set(t.projects,o,n);break}o++}}catch(l){r.e(l)}finally{r.f()}}})))}))}}},tt=Z,et=(a("12a6"),Object(p["a"])(tt,Y,Q,!1,null,"1766b302",null)),at=et.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"项目介绍",name:"1"}},[a("ProjectInfo",{attrs:{project:t.project}})],1),a("el-tab-pane",{attrs:{label:"项目Host",name:"2"}},[a("HostList",{attrs:{project:t.project}})],1),a("el-tab-pane",{attrs:{label:"API接口",name:"3"}},[a("ApiEntry",{attrs:{project:t.project}})],1),a("el-tab-pane",{attrs:{label:"测试用例",name:"4"}},[a("CaseEntry",{attrs:{project:t.project}})],1),a("el-tab-pane",{attrs:{label:"任务列表",name:"5"}},[a("TaskList",{attrs:{project:t.project}})],1),a("el-tab-pane",{attrs:{label:"运行记录",name:"6"}},[a("RecordList",{attrs:{project:t.project}})],1)],1)],1)},ot=[],rt=a("ade3"),it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("ul",{staticClass:"project-info-group"},[a("li",[a("span",{staticClass:"title"},[t._v("名称：")]),a("span",{staticClass:"detail"},[t._v(t._s(t.project.name))])]),a("li",[a("span",{staticClass:"title"},[t._v("类型：")]),a("span",{staticClass:"detail"},[t._v(t._s(t.project.type))])]),a("li",[a("span",{staticClass:"title"},[t._v("介绍：")]),a("span",{staticClass:"detail"},[t._v(t._s(t.project.description))])]),a("li",[a("span",{staticClass:"title"},[t._v("创建时间：")]),a("span",{staticClass:"detail"},[t._v(t._s(t._f("dateFormat")(t.project.create_time)))])]),a("li",[a("span",{staticClass:"title"},[t._v("更新时间：")]),a("span",{staticClass:"detail"},[t._v(t._s(t._f("dateFormat")(t.project.last_update_time)))])]),a("li",[a("span",{staticClass:"title"},[t._v("创建人：")]),a("span",{staticClass:"detail"},[t._v(t._s(t.project.user?t.project.user.username:""))])])])])},st=[],lt={name:"ProjectInfo",props:["project"],data:function(){return{}},components:{}},ct=lt,ut=(a("28fb"),Object(p["a"])(ct,it,st,!1,null,"31f84755",null)),pt=ut.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"top-group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.hostDialogVisible=!0}}},[t._v("新增Host")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.project.host_list}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"host",label:"Host"}}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.onDeleteHost(e.row,e.$index)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"新增Host",visible:t.hostDialogVisible},on:{"update:visible":function(e){t.hostDialogVisible=e}}},[a("el-form",{ref:"hostForm",attrs:{model:t.hostForm,"label-width":"80px",rules:t.hostRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.hostForm.name,callback:function(e){t.$set(t.hostForm,"name",e)},expression:"hostForm.name"}})],1),a("el-form-item",{attrs:{label:"host",prop:"host"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.hostForm.host,callback:function(e){t.$set(t.hostForm,"host",e)},expression:"hostForm.host"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.hostForm.description,callback:function(e){t.$set(t.hostForm,"description",e)},expression:"hostForm.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.hostDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitAddHost}},[t._v("确 定")])],1)],1)],1)},mt=[],ft=(a("a434"),{name:"HostList",props:["project"],data:function(){return{hostDialogVisible:!1,hostForm:{name:"",host:"",description:""},hostRules:{name:[{required:!0,trigger:"blur",message:"请输入host名称！"}],host:[{required:!0,trigger:"blur",message:"请输入host！"}]}}},components:{},methods:{onSubmitAddHost:function(){var t=this;this.$refs["hostForm"].validate((function(e){if(e){var a=JSON.parse(JSON.stringify(t.hostForm));a.project_id=t.project.id,t.$loading.show(),t.$http.addHost(a).then((function(e){var a=e.data;t.hostDialogVisible=!1,t.hostForm={name:"",host:"",description:""},t.project.host_list.push(a),t.$loading.hide(),t.$message.success()}))}}))},onDeleteHost:function(t,e){var a=this;this.$messagebox.confirm({message:"您确定要删除这个Host吗？",confirmCallback:function(){a.$loading.show(),a.$http.deleteHost(t.id).then((function(t){a.project.host_list.splice(e,1),a.$loading.hide(),a.$message.success()}))}})}}}),ht=ft,bt=(a("3846"),Object(p["a"])(ht,dt,mt,!1,null,"064f9a5f",null)),vt=bt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t.page==t.pagetype.API_LIST?a("ApiList",{attrs:{project:t.project},on:{"page-changed":t.onPageChanged}}):t._e(),t.page==t.pagetype.ADD_API?a("AddApi",{attrs:{project:t.project,api:t.api},on:{"page-changed":t.onPageChanged}}):t._e()],1)},_t=[],yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"top-group"},[a("el-link",{attrs:{type:"default",icon:"el-icon-back",underline:!1},on:{click:t.onGotoApiList}},[t._v("接口列表")]),a("el-button-group",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("保存")]),a("el-button",{attrs:{type:"default"},on:{click:t.onCancel}},[t._v("取消")])],1)],1),a("div",{staticClass:"main-group"},[a("el-form",{ref:"form",attrs:{model:t.form,inline:!0,"label-width":"80px",rules:t.rules}},[a("el-collapse",{staticClass:"collapse-group",model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"接口",name:"1"}},[a("el-form-item",{attrs:{label:"接口名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入接口名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"请求方法",prop:"http_method"}},[a("el-select",{attrs:{placeholder:"请选择请求方法"},model:{value:t.form.http_method,callback:function(e){t.$set(t.form,"http_method",e)},expression:"form.http_method"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),a("el-option",{attrs:{label:"POST",value:"POST"}}),a("el-option",{attrs:{label:"DELETE",value:"DELETE"}}),a("el-option",{attrs:{label:"PUT",value:"PUT"}})],1)],1),a("el-form-item",{attrs:{label:"域名",prop:"host_id"}},[a("el-select",{attrs:{placeholder:"请选择域名"},model:{value:t.form.host_id,callback:function(e){t.$set(t.form,"host_id",e)},expression:"form.host_id"}},[t.project&&t.project.host_list?t._l(t.project.host_list,(function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.id}})})):t._e()],2)],1),a("el-form-item",{attrs:{label:"path",prop:"path"}},[a("el-input",{attrs:{placeholder:"请输入url的path"},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1)],1),a("el-collapse-item",{attrs:{title:"请求头部",name:"2"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.form.headers}},[a("el-table-column",{attrs:{prop:"name",label:"key",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"head类型",filterable:!0},model:{value:e.row.name,callback:function(a){t.$set(e.row,"name",a)},expression:"scope.row.name"}},t._l(t.headers,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"value",label:"value",width:"600"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{value:e.row.value,placeholder:"请输入内容"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.form.headers.length>1?a("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"mini"},on:{click:function(a){return t.onDeleteHeader(e.$index)}}}):t._e(),e.$index==t.form.headers.length-1?a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:t.onAddHeader}}):t._e()]}}])})],1)],1),a("el-collapse-item",{attrs:{title:"请求参数",name:"3"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.form.data}},[a("el-table-column",{attrs:{prop:"name",label:"参数名",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{value:e.row.name,placeholder:"请输入参数名"},model:{value:e.row.name,callback:function(a){t.$set(e.row,"name","string"===typeof a?a.trim():a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{prop:"value",label:"参数值",width:"600"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{value:e.row.value,placeholder:"请输入参数值"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value","string"===typeof a?a.trim():a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.form.data.length>1?a("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"mini"},on:{click:function(a){return t.onDeleteBody(e.$index)}}}):t._e(),e.$index==t.form.data.length-1?a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:t.onAddBody}}):t._e()]}}])})],1)],1),a("el-collapse-item",{attrs:{title:"期望结果",name:"4"}},[a("el-form-item",{attrs:{label:"状态码",prop:"expect_code"}},[a("el-select",{attrs:{placeholder:"请选择状态码"},model:{value:t.form.expect_code,callback:function(e){t.$set(t.form,"expect_code",e)},expression:"form.expect_code"}},t._l(t.status_codes,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"期望内容",prop:"expect_content"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入期望内容",rows:"5",cols:"40"},model:{value:t.form.expect_content,callback:function(e){t.$set(t.form,"expect_content",e)},expression:"form.expect_content"}})],1)],1),a("el-collapse-item",{attrs:{title:"描述",name:"5"}},[a("el-input",{staticClass:"desc-input",attrs:{type:"textarea",placeholder:"请输入描述信息！"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],1)])},kt=[],jt={API_LIST:1,ADD_API:2},xt=jt,$t={name:"AddApi",props:["project","api"],data:function(){return{form:{name:"",host_id:"",http_method:"",path:"",headers:[{name:"",value:""}],data:[{name:"",value:""}],description:"",expect_code:"",expect_content:""},rules:{name:[{required:!0,trigger:"blur",message:"请输入接口名称！"}],host_id:[{required:!0,trigger:"change",message:"请选择host！"}],http_method:[{required:!0,trigger:"change",message:"请选择http method！"}],path:[{required:!0,trigger:"blur",message:"请输入PATH！"}],expect_code:[{required:!0,trigger:"change",message:"请选择状态码！"}]},activeNames:["1","2","3","4","5"],headers:["Accept","Accept-Charset","Accept-Encoding","Accept-Language","Accept-Ranges","Authorization","Cache-Control","Connection","Cookie","Content-Length","Content-Type","Content-MD5","Date","Expect","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Max-Forwards","Origin","Pragma","Proxy-Authorization","Range","Referer","TE","Upgrade","User-Agent","Via"],status_codes:["200","201","202","203","204","301","302","400","401","403","404","405","406","407","408","500","502"]}},components:{},mounted:function(){if(this.api){var t=JSON.parse(this.api.headers),e=JSON.parse(this.api.data),a={id:this.api.id,name:this.api.name,host_id:this.api.host.id,http_method:this.api.http_method,path:this.api.path,headers:t.length>0?t:[{name:"",value:""}],data:e.length>0?e:[{name:"",value:""}],description:this.api.description,expect_code:this.api.expect_code,expect_content:this.api.expect_content};this.form=a}},methods:{onGotoApiList:function(){this.$emit("page-changed",xt.API_LIST)},onSave:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var a,n=JSON.parse(JSON.stringify(t.form)),o=[],r=[],i=Object(X["a"])(n.headers);try{for(i.s();!(a=i.n()).done;){var s=a.value;s.name&&s.value&&o.push(s)}}catch(p){i.e(p)}finally{i.f()}var l,c=Object(X["a"])(n.data);try{for(c.s();!(l=c.n()).done;){var u=l.value;u.name&&u.value&&r.push(u)}}catch(p){c.e(p)}finally{c.f()}n.headers=JSON.stringify(o),n.data=JSON.stringify(r),n.project_id=t.project.id,t.$loading.show(),t.form.id?t.$http.editApi(t.form.id,n).then((function(e){t.$loading.hide(),t.$message.success();var a,n=e.data,o=0,r=Object(X["a"])(t.project.api_list);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(i.id==n.id){t.project.api_list[o]=n;break}o++}}catch(p){r.e(p)}finally{r.f()}t.$emit("page-changed",xt.API_LIST)})):t.$http.addApi(n).then((function(e){t.$loading.hide(),t.$message.success();var a=e.data;t.project.api_list.push(a),t.$emit("page-changed",xt.API_LIST)}))}}))},onCancel:function(){},onDeleteHeader:function(t){this.form.headers.splice(t,1)},onAddHeader:function(){this.form.headers.push({name:"",value:""})},onDeleteBody:function(t){this.form.data.splice(t,1)},onAddBody:function(){this.form.data.push({name:"",value:""})}}},wt=$t,Ct=(a("507b"),a("752a"),Object(p["a"])(wt,yt,kt,!1,null,"c64c399c",null)),At=Ct.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"top-group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.onGotoAddApi}},[t._v("新增API")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.project.api_list}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"Host"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.host.host)+" ")]}}])}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.onRunApi(e.row,e.$index)}}},[t._v("运行")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.onEditApi(e.row,e.$index)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.onDeleteApi(e.row,e.$index)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"运行结果",visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{attrs:{data:[t.record],height:"250"}},[a("el-table-column",{attrs:{fixed:"",property:"url",label:"url",width:"150"}}),a("el-table-column",{attrs:{property:"http_method",label:"请求方法",width:"100"}}),a("el-table-column",{attrs:{property:"headers",label:"请求头"}}),a("el-table-column",{attrs:{property:"data",label:"请求体"}}),a("el-table-column",{attrs:{property:"return_code",label:"状态码",width:"80"}}),a("el-table-column",{attrs:{property:"return_content",label:"响应体"}}),a("el-table-column",{attrs:{property:"run_result",label:"测试结果",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.run_result?a("el-tag",{attrs:{type:"success"}},[t._v("成功")]):t._e(),0==e.row.run_result?a("el-tag",{attrs:{type:"danger"}},[t._v("失败")]):t._e()]}}])})],1)],1)],1)},Ot=[],Ft={name:"ApiList",props:["project"],data:function(){return{dialogVisible:!1,record:{}}},components:{},methods:{onGotoAddApi:function(){this.$emit("page-changed",xt.ADD_API)},onRunApi:function(t,e){var a=this;this.$loading.show(),this.$http.runApi(t.id).then((function(t){a.$loading.hide();var e=t.data;e.return_code==e.api.expect_code?e.run_result=!0:e.run_result=!1,a.record=e,a.dialogVisible=!0}))},onEditApi:function(t,e){this.$emit("page-changed",xt.ADD_API,t)},onDeleteApi:function(t,e){var a=this;this.$messagebox.confirm({confirmCallback:function(){a.$loading.show(),a.$http.deleteApi(t.id).then((function(t){a.$loading.hide(),a.$message.success(),a.project.api_list.splice(e,1)}))}})}}},Et=Ft,Pt=(a("367a"),Object(p["a"])(Et,St,Ot,!1,null,"12873716",null)),It=Pt.exports,Tt={name:"ApiEntry",props:["project"],data:function(){return{page:xt.API_LIST,pagetype:xt,api:null}},components:{AddApi:At,ApiList:It},methods:{onPageChanged:function(t,e){this.page=t,this.api=e}}},Dt=Tt,Lt=Object(p["a"])(Dt,gt,_t,!1,null,"06caef3a",null),Rt=Lt.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t.page==t.pagetype.CASE_LIST?a("CaseList",{attrs:{project:t.project},on:{"page-changed":t.onPageChanged}}):t._e(),t.page==t.pagetype.ADD_CASE?a("AddCase",{attrs:{project:t.project,caseobj:t.caseobj},on:{"page-changed":t.onPageChanged}}):t._e()],1)},Vt=[],zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"top-group"},[a("el-link",{attrs:{type:"default",icon:"el-icon-back",underline:!1},on:{click:t.onGotoCaseList}},[t._v("用例列表")]),a("el-button-group",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSave}},[t._v("保存")]),a("el-button",{attrs:{type:"default"},on:{click:t.onCancel}},[t._v("取消")])],1)],1),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.rules,inline:!0}},[a("div",{staticClass:"case-name-group",staticStyle:{width:"400px"}},[a("el-form-item",{attrs:{label:"用例名称",prop:"name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("div",{staticClass:"case-argument-group"},[a("el-form-item",{attrs:{label:"用例参数"}},t._l(t.form.arguments,(function(e,n){return a("div",{key:n,staticClass:"case-argument-input-group"},[a("el-input",{attrs:{placeholder:"请输入参数名称"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"argument.name"}}),a("el-input",{attrs:{placeholder:"请输入参数值"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"argument.value"}}),a("span",{staticClass:"button-group"},[t.form.arguments.length>1?a("el-button",{attrs:{type:"info",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.onRemoveCaseArgument(e,n)}}}):t._e(),a("el-button",{attrs:{type:"default",icon:"el-icon-plus",size:"mini"},on:{click:function(a){return t.onAddCaseArgument(e,n)}}})],1)],1)})),0)],1),a("el-timeline",t._l(t.form.api_list,(function(e,n){return a("el-timeline-item",{key:n,attrs:{color:"#0bbd87"}},[a("el-form-item",{attrs:{label:"第"+(n+1)+"步"}},[a("el-select",{attrs:{placeholder:"请选择需要执行的API"},model:{value:e.id,callback:function(a){t.$set(e,"id",a)},expression:"case_api.id"}},t._l(t.project.api_list,(function(t){return a("el-option",{key:t.name+n,attrs:{label:t.name+"("+t.path+")",value:t.id}})})),1),a("span",{staticClass:"button-group"},[t.form.api_list.length>1?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.onRemoveApi(e,n)}}}):t._e(),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(a){return t.onAddApi(e,n)}}})],1)],1),a("el-form-item",{attrs:{label:"提取参数"}},t._l(e.arguments,(function(n,o){return a("div",{key:o,staticClass:"argument-group"},[a("el-input",{staticClass:"argument-input",attrs:{placeholder:"请输入参数名称"},model:{value:n.name,callback:function(e){t.$set(n,"name",e)},expression:"argument.name"}}),a("el-select",{staticClass:"argument-input",attrs:{placeholder:"请选择参数来源"},model:{value:n.origin,callback:function(e){t.$set(n,"origin",e)},expression:"argument.origin"}},[a("el-option",{attrs:{label:"响应体",value:"BODY"}}),a("el-option",{attrs:{label:"响应头",value:"HEADER"}}),a("el-option",{attrs:{label:"响应Cookie",value:"COOKIE"}})],1),a("el-input",{staticClass:"argument-input",attrs:{placeholder:"请输入参数获取格式"},model:{value:n.format,callback:function(e){t.$set(n,"format",e)},expression:"argument.format"}}),a("span",{staticClass:"button-group"},[e.arguments.length>1?a("el-button",{attrs:{type:"info",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.onRemoveApiArgument(e,n,o)}}}):t._e(),a("el-button",{attrs:{type:"default",icon:"el-icon-plus",size:"mini"},on:{click:function(a){return t.onAddApiArgument(e)}}})],1)],1)})),0)],1)})),1),a("el-form-item",{attrs:{label:"用例描述"}},[a("el-input",{attrs:{type:"textarea",rows:4,cols:40,placeholder:"请输入描述信息"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)},Ht=[],Jt={CASE_LIST:1,ADD_CASE:2},Ut=Jt,qt={name:"AddCase",props:["project","caseobj"],data:function(){return{form:{name:"",description:"",arguments:[{name:"",value:""}],api_list:[{id:"",index:0,arguments:[{name:"",origin:"",format:""}]}]},rules:{name:[{required:!0,trigger:"blur",message:"请输入用例名称！"}]}}},components:{},mounted:function(){if(this.caseobj){var t=JSON.parse(JSON.stringify(this.caseobj));if(0==t.arguments.length&&(this.form.arguments=[{name:"",value:""}]),0==t.api_list.length)this.form.api_list=[{id:"",index:0,arguments:[{name:"",origin:"",format:""}]}];else{var e,a=Object(X["a"])(t.api_list);try{for(a.s();!(e=a.n()).done;){var n=e.value;0==n.arguments&&(n.arguments=[{name:"",origin:"",format:""}])}}catch(o){a.e(o)}finally{a.f()}}this.form=t}},methods:{onGotoCaseList:function(){this.$emit("page-changed",Ut.CASE_LIST)},onSave:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var a,n=JSON.parse(JSON.stringify(t.form)),o=[],r=Object(X["a"])(n.arguments);try{for(r.s();!(a=r.n()).done;){var i=a.value;i.name&&i.value&&o.push(i)}}catch(b){r.e(b)}finally{r.f()}n.arguments=o;var s,l=[],c=0,u=Object(X["a"])(n.api_list);try{for(u.s();!(s=u.n()).done;){var p=s.value;if(p.id){var d,m=[],f=Object(X["a"])(p.arguments);try{for(f.s();!(d=f.n()).done;){var h=d.value;h.name&&h.origin&&h.format&&m.push(h)}}catch(b){f.e(b)}finally{f.f()}p.arguments=m,p.index=c,l.push(p),c++}}}catch(b){u.e(b)}finally{u.f()}n.api_list=l,n.project_id=t.project.id,t.$loading.show(),t.form.id?t.$http.editCase(t.form.id,n).then((function(e){t.$loading.hide();var a,n=e.data,o=0,r=Object(X["a"])(t.project.case_list);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(i.id==n.id){t.project.case_list[o]=n;break}o++}}catch(b){r.e(b)}finally{r.f()}t.$emit("page-changed",Ut.CASE_LIST),t.$message.success()})):t.$http.addCase(n).then((function(e){t.$loading.hide();var a=e.data;t.project.case_list.push(a),t.$emit("page-changed",Ut.CASE_LIST),t.$message.success()}))}}))},onCancel:function(){},onRemoveCaseArgument:function(t,e){this.form.arguments.splice(e,1)},onAddCaseArgument:function(t,e){this.form.arguments.push(t)},onRemoveApi:function(t,e){this.form.api_list.splice(e,1)},onAddApi:function(t,e){this.form.api_list.push({id:"",index:0,arguments:[{name:"",origin:"",format:""}]})},onRemoveApiArgument:function(t,e,a){t.arguments.splice(a,1)},onAddApiArgument:function(t){t.arguments.push({name:"",origin:"",format:""})}}},Bt=qt,Mt=(a("127b"),Object(p["a"])(Bt,zt,Ht,!1,null,"0f2db149",null)),Gt=Mt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"top-group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.onAddCase}},[t._v("新增用例")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.project.case_list}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormat")(e.row.create_time))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.onRunCase(e.row,e.$index)}}},[t._v("运行")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.onEditCase(e.row,e.$index)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.onDeleteCase(e.row,e.$index)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"运行结果",visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{attrs:{data:t.records,height:"500"}},[a("el-table-column",{attrs:{fixed:"",property:"url",label:"url",width:"150"}}),a("el-table-column",{attrs:{property:"http_method",label:"请求方法",width:"100"}}),a("el-table-column",{attrs:{property:"headers",label:"请求头"}}),a("el-table-column",{attrs:{property:"data",label:"请求体"}}),a("el-table-column",{attrs:{property:"return_code",label:"状态码",width:"80"}}),a("el-table-column",{attrs:{property:"return_content",label:"响应体"}}),a("el-table-column",{attrs:{property:"run_result",label:"测试结果",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.run_result?a("el-tag",{attrs:{type:"success"}},[t._v("成功")]):t._e(),0==e.row.run_result?a("el-tag",{attrs:{type:"danger"}},[t._v("失败")]):t._e()]}}])})],1)],1)],1)},Wt=[],Yt={name:"CaseList",props:["project"],data:function(){return{dialogVisible:!1,records:[]}},components:{},methods:{onAddCase:function(){this.$emit("page-changed",Ut.ADD_CASE)},onRunCase:function(t,e){var a=this;this.$loading.show(),this.$http.runCase(t.id).then((function(t){a.$loading.hide();var e,n=t.data,o=n.api_records,r=Object(X["a"])(o);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.return_code==i.api.expect_code?i.run_result=!0:i.run_result=!1}}catch(s){r.e(s)}finally{r.f()}a.records=o,a.dialogVisible=!0}))},onEditCase:function(t,e){this.$emit("page-changed",Ut.ADD_CASE,t)},onDeleteCase:function(t,e){}}},Qt=Yt,Xt=(a("2e17"),Object(p["a"])(Qt,Kt,Wt,!1,null,"fb002d42",null)),Zt=Xt.exports,te={name:"CaseEntry",props:["project"],data:function(){return{page:Ut.CASE_LIST,pagetype:Ut,caseobj:null}},components:{AddCase:Gt,CaseList:Zt},methods:{onPageChanged:function(t,e){this.page=t,this.caseobj=e}}},ee=te,ae=Object(p["a"])(ee,Nt,Vt,!1,null,"180a9dd4",null),ne=ae.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"API",name:"1"}},[a("RecordTable",{attrs:{records:t.api_records}})],1),a("el-tab-pane",{attrs:{label:"用例",name:"2"}},[a("el-collapse",t._l(t.case_records,(function(e,n){return a("el-collapse-item",{key:n,staticClass:"case-record-list",attrs:{title:e.case.name}},[a("template",{slot:"title"},[a("div",{staticClass:"case-record-title"},[a("span",[t._v(t._s(e.case.name))]),a("span",[t._v(t._s(t._f("dateFormat")(e.case.create_time)))])])]),a("RecordTable",{attrs:{records:e.api_records}})],2)})),1)],1)],1)],1)},re=[],ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"record-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.records}},[a("el-table-column",{attrs:{prop:"url",label:"url"}}),a("el-table-column",{attrs:{prop:"http_method",label:"请求方法",width:"100"}}),a("el-table-column",{attrs:{prop:"data",label:"请求参数"}}),a("el-table-column",{attrs:{prop:"return_code",label:"响应状态码",width:"100"}}),a("el-table-column",{attrs:{prop:"return_content",label:"响应体"}}),a("el-table-column",{attrs:{label:"测试状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.api.expect_code==e.row.return_code?a("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v("成功")]):a("el-tag",{attrs:{type:"danger",effect:"dark"}},[t._v("失败")])]}}])}),a("el-table-column",{attrs:{label:"执行时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormat")(e.row.create_time))+" ")]}}])})],1)],1)},se=[],le={name:"RecordTable",props:["records"],data:function(){return{}},components:{}},ce=le,ue=Object(p["a"])(ce,ie,se,!1,null,"c4ac5370",null),pe=ue.exports,de={name:"RecordList",props:["project"],data:function(){return{activeName:"1",api_records:[],case_records:[]}},components:{RecordTable:pe},watch:{project:function(){var t=this;this.project&&this.project.id&&(this.$http.getRunRecords(this.project.id,"api").then((function(e){var a=e.data;t.api_records=a,console.log(a)})),this.$http.getRunRecords(this.project.id,"case").then((function(e){var a=e.data;t.case_records=a})))}}},me=de,fe=Object(p["a"])(me,oe,re,!1,null,"5a714602",null),he=fe.exports,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"top-group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addTask}},[t._v("新增任务")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.project.task_list}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),a("el-table-column",{attrs:{prop:"case.name",label:"用例"}}),a("el-table-column",{attrs:{prop:"expr",label:"表达式"}}),a("el-table-column",{attrs:{prop:"status",label:"状态（1：正在运行，2：停止运行）"}}),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.onEditTask(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.onChangeStatus(e.row)}}},[1==e.row.status?[t._v("停止")]:t._e(),2==e.row.status?[t._v("启动")]:t._e()],2),a("el-button",{attrs:{type:"danger",size:"mini"}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"新增任务",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"taskForm",attrs:{model:t.taskForm,"label-width":"80px",rules:t.taskRules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.taskForm.name,callback:function(e){t.$set(t.taskForm,"name",e)},expression:"taskForm.name"}})],1),a("el-form-item",{attrs:{label:"用例",prop:"case_id"}},[a("el-select",{attrs:{placeholder:"请选择用例"},model:{value:t.taskForm.case_id,callback:function(e){t.$set(t.taskForm,"case_id",e)},expression:"taskForm.case_id"}},t._l(t.project.case_list,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"表达式",prop:"expr"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.taskForm.expr,callback:function(e){t.$set(t.taskForm,"expr",e)},expression:"taskForm.expr"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitTask}},[t._v("确 定")])],1)],1)],1)},ve=[],ge={name:"TaskList",props:["project"],data:function(){return{dialogVisible:!1,dialogIsEditing:!1,taskForm:{name:"",case_id:"",expr:""},taskRules:{name:[{required:!0,trigger:"blur",message:"请输入任务名称"}],case_id:[{required:!0,trigger:"change",message:"请选择用例"}],expr:[{required:!0,trigger:"blur",message:"请填入表达式"}]}}},components:{},methods:{addTask:function(){this.dialogIsEditing=!1,this.dialogVisible=!0,this.taskForm={name:"",case_id:"",expr:""}},onEditTask:function(t){this.taskForm.name=t.name,this.taskForm.case_id=t.case.id,this.taskForm.expr=t.expr,this.taskForm.id=t.id,this.dialogIsEditing=!0,this.dialogVisible=!0},onSubmitTask:function(){var t=this;this.$refs["taskForm"].validate((function(e){if(e){var a=JSON.parse(JSON.stringify(t.taskForm));a.project_id=t.project.id,t.dialogIsEditing?t.$http.editTask(a.id,a).then((function(e){var a,n=e.data,o=Object(X["a"])(t.project.task_list);try{for(o.s();!(a=o.n()).done;){var r=a.value;r.id==n.id&&(r.name=n.name,r.case_id=n.id,r.expr=n.expr);break}}catch(i){o.e(i)}finally{o.f()}t.dialogVisible=!1,t.$message.success("任务更新完成！")})):t.$http.addTask(a).then((function(e){var a=e.data;t.project.task_list.push(a),t.dialogVisible=!1}))}}))},onChangeStatus:function(t){var e=this,a=1==t.status?2:1;this.$http.changeTaskStatus(t.id,a).then((function(t){var n,o=t.data,r=Object(X["a"])(e.project.task_list);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.id==o.id){i.status=a;break}}}catch(l){r.e(l)}finally{r.f()}var s=1==a?"任务已经启动！":"任务已经停止！";e.$message.success(s)}))}}},_e=ge,ye=Object(p["a"])(_e,be,ve,!1,null,"174a43dc",null),ke=ye.exports,je={name:"ProjectDetail",data:function(){return{activeName:"1",project:{}}},components:(n={},Object(rt["a"])(n,pt.name,pt),Object(rt["a"])(n,"HostList",vt),Object(rt["a"])(n,"ApiEntry",Rt),Object(rt["a"])(n,"CaseEntry",ne),Object(rt["a"])(n,"RecordList",he),Object(rt["a"])(n,"TaskList",ke),n),mounted:function(){var t=this,e=this.$route.params.project_id;this.$http.getProjectDetail(e).then((function(e){var a=e.data;t.project=a,console.log(t.project)}))}},xe=je,$e=Object(p["a"])(xe,nt,ot,!1,null,"24395dc6",null),we=$e.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.user_list}},[a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"telephone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{label:"加入时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormat")(e.row.date_joined))+" ")]}}])}),a("el-table-column",{attrs:{prop:"is_active",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.is_active?a("el-tag",{attrs:{type:"success"}},[t._v("可用")]):t._e(),0==e.row.is_active?a("el-tag",{attrs:{type:"danger"}},[t._v("冻结")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"danger",size:"mini"}},[t._v("禁用")])],1)],1)],1)},Ae=[],Se={name:"MemberList",data:function(){return{user_list:[]}},components:{},mounted:function(){var t=this;this.$http.getUserList().then((function(e){t.user_list=e.data}))}},Oe=Se,Fe=Object(p["a"])(Oe,Ce,Ae,!1,null,"543e9d6a",null),Ee=Fe.exports;i["default"].use(w["a"]);var Pe=new w["a"]({routes:[{path:"/",component:E,children:[{path:"/",component:U,name:"index"},{path:"project",component:at,name:"project_list"},{path:"project/:project_id",component:we,name:"project_detail"},{path:"settings",component:W,name:"settings"},{path:"members",component:Ee,name:"members"}]},{path:"/login",component:R,name:"login"}]});Pe.beforeEach((function(t,e,a){"login"==t.name||k.is_authed?a():a({name:"login"})}));var Ie=Pe,Te=(a("26fe"),a("2984"),a("7c18")),De=a.n(Te),Le=function(){function t(){Object(f["a"])(this,t),this.config={showClose:!0,duration:2e3}}return Object(h["a"])(t,[{key:"show",value:function(){De()(JSON.parse(JSON.stringify(this.config)))}},{key:"success",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"恭喜！操作成功！";this.config.type="success",this.config.message=t,this.show()}},{key:"info",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.config.type="info",this.config.message=t,this.show()}},{key:"warning",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.config.type="warning",this.config.message=t,this.show()}},{key:"error",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.config.type="error",this.config.message=t,this.show()}}]),t}(),Re=new Le,Ne=Re,Ve=(a("99af"),a("25f0"),a("4d90"),{dateFormat:function(t,e){function a(t){return t.toString().padStart(2,"0")}t=new Date(t);var n=t.getFullYear(),o=a(t.getMonth()+1),r=a(t.getDate()),i=a(t.getHours()),s=a(t.getSeconds()),l=a(t.getMinutes());return e&&e.toLowerCase("yyyy-mm-dd")?"".concat(n,"-").concat(o,"-").concat(r):"".concat(n,"-").concat(o,"-").concat(r," ").concat(i,":").concat(s,":").concat(l)}}),ze=Ve,He=(a("6eb9"),a("6389")),Je=a.n(He),Ue=function(){function t(){Object(f["a"])(this,t)}return Object(h["a"])(t,[{key:"confirm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.message||"您确定要执行此操作吗？",a=t.confirmCallback||null,n=t.cancelCallback||null,o=t.type||"warning";Je.a.confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:o}).then((function(){a&&a()})).catch((function(){n&&n()}))}}]),t}(),qe=new Ue,Be=(a("6d09"),a("ee61")),Me=a.n(Be),Ge=function(){function t(){Object(f["a"])(this,t)}return Object(h["a"])(t,[{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.loading=Me.a.service({fullscreen:!0,background:"rgba(0, 0, 0, 0.7)",spinner:"el-icon-loading",text:t||"正在加载中..."})}},{key:"hide",value:function(){this.loading&&this.loading.close()}}]),t}(),Ke=new Ge;i["default"].config.productionTip=!1,i["default"].use(r.a),i["default"].prototype.$auth=k,i["default"].prototype.$http=$,i["default"].prototype.$message=Ne,i["default"].prototype.$messagebox=qe,i["default"].prototype.$loading=Ke,Object.keys(ze).forEach((function(t){i["default"].filter(t,ze[t])})),new i["default"]({render:function(t){return t(m)},router:Ie}).$mount("#app")},"589b":function(t,e,a){},"5acb":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var n=a("589b"),o=a.n(n);o.a},"5d3f":function(t,e,a){},"74da":function(t,e,a){"use strict";var n=a("d68b"),o=a.n(n);o.a},"752a":function(t,e,a){"use strict";var n=a("84e3"),o=a.n(n);o.a},"7cc1":function(t,e,a){},"84e3":function(t,e,a){},"8cb3":function(t,e,a){},"927a":function(t,e,a){},c75e:function(t,e,a){},c889:function(t,e,a){"use strict";var n=a("e435"),o=a.n(n);o.a},d190:function(t,e,a){},d68b:function(t,e,a){},e435:function(t,e,a){},f30a:function(t,e,a){"use strict";var n=a("c75e"),o=a.n(n);o.a}});
//# sourceMappingURL=app.218e42f6.js.map